{% extends "base.html" %} {% block title %}Input{% endblock %} {% block content
    %}

<head>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.18/css/jquery.dataTables.min.css" />
    <script src="https://code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" type="text/javascript"></script>
    <style>
        #chromosomes {
            padding: 20px;
            padding-bottom: 40px;
            text-align: center;
       
        }
    </style>
</head>

<div class="container">
    <h3>Step 2: Select a SNP analyze (filter by chromosome)</h3>
    <div class id = "chromosomes">
        <form action="#" method="post">
            {% for i in (list(range(1, 23)) + list(['X', 'Y'])) %}
            <input type="submit" name="chrom" value={{i}}>
            {% endfor %}
        </form>
    </div>  
  
    <table id="example" class="display" style="width:100%">
        <thead>
            <tr>
                <th>rsid</th>
                <th>chromosome</th>
                <th>position</th>
                <th>genotype</th>
                <th>action</th>
            </tr>
        </thead>
    </table>

    <script>
        $(document).ready(function () {
            var table = $('#example').DataTable({
                "ajax": {
                    "url": "/showtable",
                    "dataType": "json",
                    "dataSrc": "data",
                    "contentType": "application/json",
                    "datatesting": "hello"
                },
                "columns": [{
                        "data": "rsid"
                    },
                    {
                        "data": "chromosome"
                    },
                    {
                        "data": "position"
                    },
                    {
                        "data": "genotype"
                    },
                    {
                        "data": null
                    }

                ],
                "columnDefs": [{
                    "targets": -1,
                    "defaultContent": "<button type='submit'>Analyze</button>"
                }]

            });
            $('#example tbody').on('click', 'button', function () {
                var data = table.row($(this).parents('tr')).data();
                $.post(`/getchoice?rsid=${data["rsid"]}&genotype=${data["genotype"]}`)
                    .done(() => {
                        window.location.replace("http://127.0.0.1:5000/output");
                    });
            });

        });
    </script>

</div>
{% endblock %}